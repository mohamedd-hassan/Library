% FIXME comparison!
\subsection{Сравнение \q{снимков} памяти}
\label{snapshots_comparing}

Метод простого сравнения двух снимков памяти для поиска изменений часто применялся для взлома игр 
на 8-битных компьютерах и взлома файлов с записанными рекордными очками.

К примеру, если вы имеете загруженную игру на 8-битном компьютере (где самой памяти не очень много, но игра
занимает еще меньше), и вы знаете что сейчас у вас, условно, 100 пуль, вы можете сделать \q{снимок} всей
памяти и сохранить где-то. Затем просто стреляете куда угодно, у вас станет 99 пуль, сделать второй \q{снимок},
и затем сравнить эти два снимка: где-то наверняка должен быть байт, который в начале был 100, а затем стал 99.

Если учесть, что игры на тех маломощных домашних компьютерах обычно были написаны на ассемблере и подобные
переменные там были глобальные, то можно с уверенностью сказать, какой адрес в памяти всегда отвечает за количество
пуль. Если поискать в дизассемблированном коде игры все обращения по этому адресу, несложно найти код,
отвечающий за уменьшение пуль и записать туда инструкцию \gls{NOP}
или несколько \gls{NOP}-в, так мы получим игру в которой у игрока всегда будет 100 пуль, например.

\myindex{BASIC!POKE}
А так как игры на тех домашних 8-битных 
компьютерах всегда загружались по одним и тем же адресам, и версий одной игры редко когда было больше одной продолжительное время,
то геймеры-энтузиасты знали, по какому адресу (используя инструкцию языка BASIC \gls{POKE}) что записать после загрузки
игры, чтобы хакнуть её. Это привело к появлению списков \q{читов} состоящих из инструкций \gls{POKE}, публикуемых
в журналах посвященным 8-битным играм.

\myindex{MS-DOS}
Точно так же легко модифицировать файлы с сохраненными рекордами (кто сколько очков набрал), впрочем, это может
сработать не только с 8-битными играми. Нужно заметить, какой у вас сейчас рекорд и где-то сохранить файл
с очками. Затем, когда очков станет другое количество, просто сравнить два файла, можно даже
DOS-утилитой FC\footnote{утилита MS-DOS для сравнения двух файлов побайтово} (файлы рекордов, часто, бинарные).

Где-то будут отличаться несколько байт, и легко будет увидеть, какие именно отвечают за количество очков. 
Впрочем, разработчики игр полностью осведомлены о таких хитростях и могут защититься от этого.

В каком-то смысле похожий пример в этой книге здесь: \myref{Millenium_DOS_game}.

% TODO: пример с какой-то простой игрушкой?

\subsubsection{Реальная история из 1999}

\myindex{ICQ}
В то время был популярен мессенджер ICQ, по крайней мере, в странах бывшего СССР.
У мессенджера была особенность --- некоторые пользователи не хотели, чтобы все знали, в онлайне они или нет.
И для начала у того пользователя нужно было запросить \emph{авторизацию}.
Тот человек мог разрешить вам видеть свой статус, а мог и не разрешить.

Автор сих строк сделал следующее.

\begin{itemize}
\item Добавил человека. Он появился в контакт-листе, в разделе ``wait for authorization''.
\item Выгрузил ICQ.
\item Сохранил базу ICQ в другом месте.
\item Загрузил ICQ снова.
\item Человек \emph{авторизировал}.
\item Выгрузил ICQ и сравнил две базы.
\end{itemize}

Выяснилось: базы отличались только одним байтом.
В первой версии: \verb|RESU\x03|, во второй \verb|RESU\x02|.
(``RESU'', надо думать, означало ``USER'', т.е., заголовок структуры, где хранилась информация о пользователе.)
Это означало, что информация об авторизации хранилась не на сервере, а в клиенте.
Вероятно, значение 2/3 отражало статус \emph{авторизированности}.

\subsubsection{Реестр Windows}

А еще можно вспомнить сравнение реестра Windows до инсталляции программы и после.
Это также популярный метод поиска, какие элементы реестра программа использует.

Наверное это причина, почему так популярны shareware-программы для очистки реестра в Windows.

Кстати, вот как сдампить реестр в Windows в текстовые файлы:

\begin{lstlisting}
reg export HKLM HKLM.reg
reg export HKCU HKCU.reg
reg export HKCR HKCR.reg
reg export HKU HKU.reg
reg export HKCC HKCC.reg
\end{lstlisting}

\myindex{UNIX!diff}
Затем их можно сравнивать используя diff...

\subsubsection{Инженерное ПО, CAD-ы, итд}

Если некое ПО использует закрытые (проприетарные) файлы, то и тут можно попытаться что-то выяснить.
Сохраняете файл.
Затем добавили точку, или линию, или еще какой примитив.
Сохранили файл, сравнили.
Или сдвинули точку в сторону, сохранили файл, сравнили.

\subsubsection{Блинк-компаратор}

Сравнение файлов или слепков памяти вообще, немного напоминает блинк-компаратор
\footnote{\url{https://ru.wikipedia.org/wiki/Блинк-компаратор}}:
устройство, которое раньше использовали астрономы для поиска движущихся небесных объектов.

Блинк-компаратор позволял быстро переключаться между двух отснятых в разное время кадров,
и астроном мог увидеть разницу визуально.

Кстати, при помощи блинк-компаратора, в 1930 был открыт Плутон.

